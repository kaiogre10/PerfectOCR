WORKFLOW_SCHEMA = {
    "type": "object",
    "properties": {
        "IDRegistro": {
            "type": "string"
        },
        "full_img": {
            "anyOf": [
                {
                    "type": "array"
                },
                {
                    "type": "object",
                    "hasOwnProperty": "shape"
                }
            ]
        },
        "metadata": {
            "type": "object",
            "properties": {
                "image_name": {
                    "type": "string"
                },
                "format": {
                    "type": "string"
                },
                "img_dims": {
                    "type": "object",
                    "properties": {
                        "width": {
                            "type": "integer"
                        },
                        "height": {
                            "type": "integer"
                        },
                        "size": {
                            "type": "integer"
                        },
                    },
                },
                "dpi": {
                    "anyOf": [
                        {
                            "type": "object",
                            "properties": {
                                "x": {
                                    "type": "number"
                                },
                                "y": {
                                    "type": "null"
                                }
                            }
                        },
                    ],
                },
                "date_creation": {
                    "type": "string"
                },
                "color": {
                    "type": [
                        "string",
                        "null"
                    ]
                }
            },
        },
        "main_data": {
            "type": "object",
            "properties": {
                "IDClienteConsultoria": {
                    "type": "string"
                },
                "FolioDocumento": {
                    "type": "string"
                },
                "FechaDocumento": {
                    "type": "string"
                },
                "IDProveedor": {
                    "type": "string"
                },
                "RFCProveedor": {
                    "type": "string"
                },
                "MontoTotalDocumento": {
                    "type": "string"
                },
                "TipoDocumento": {
                    "type": "string"
                },
                "UUID": {
                    "type": "string"
                },
                "FechaDigitalizacion": {
                    "type": "string"
                },
                "TasaIVAGeneral": {
                    "type": "string"
                },
                "MontoSubtotalGeneral": {
                    "type": "string"
                },
            }
        },
        "polygons": {
            "type": "object",
            "patternProperties": {
                "^poly_\\d{4}$": {
                    "type": "object",
                    "properties": {
                        "polygon_id": {
                            "type": "string"
                        },
                        "geometry": {
                            "type": "object",
                            "properties": {
                                "polygon_coords": {
                                    "type": "array",
                                    "items": {
                                        "type": "array",
                                        "items": {
                                            "type": "number"
                                        },
                                        "minItems": 2,
                                        "maxItems": 2
                                    },
                                },
                                "bounding_box": {
                                    "type": "array",
                                    "items": {
                                        "type": "number"
                                    },
                                    "minItems": 4,
                                    "maxItems": 4
                                },
                                "centroid": {
                                    "type": "array",
                                    "items": {
                                        "type": "number"
                                    },
                                    "minItems": 2,
                                    "maxItems": 2
                                },
                            },
                        },
                        "cropedd_geometry": {
                            "type": "object",
                            "properties": {
                                "padd_centroid": {
                                    "type": "array",
                                    "items": {
                                        "type": "number"
                                    },
                                    "minItems": 2,
                                    "maxItems": 2
                                },
                                "padding_coords": {
                                    "type": "array",
                                    "items": {
                                        "type": "integer"
                                    },
                                    "minItems": 4,
                                    "maxItems": 4
                                },
                                "poly_dims": {
                                    "type": "object",
                                    "properties": {
                                        "poly_width": {
                                            "type": "integer"
                                        },
                                        "poly_height": {
                                            "type": "integer"
                                        },
                                    },
                                },
                            },
                        },
                        "cropped_img": {
                            "type": [
                                "object",
                                "null"
                            ]
                        },
                        "perimeter": {
                            "type": [
                                "number",
                                "null"
                            ]
                        },
                        "line_id": {
                            "type": "string"
                        },
                        "ocr_text": {
                            "type": "string"
                        },
                        "ocr_confidence": {
                            "type": [
                                "number",
                                "null"
                            ]
                        },
                        "was_fragmented": {
                            "type": "boolean"
                        },
                        "stage": {
                            "type": "string"
                        },
                        "status": {
                            "type": "boolean"
                        },
                    },
                },
            },
        },
        "all_lines": {
            "type": "object",
            "patternProperties": {
                "^line_\\d{4}$": {
                    "type": "object",
                    "properties": {
                        "lineal_id": {
                            "type": "string"
                        },
                        "text": {
                            "type": "string"
                        },
                        "encoded_text": {
                            "type": "array",
                            "items": {
                                "type": "integer"
                            }
                        },
                        "polygon_ids": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "line_bbox": {
                            "type": "array",
                            "items": {
                                "type": "number"
                            },
                            "minItems": 4,
                            "maxItems": 4
                        },
                        "line_centroid": {
                            "type": "array",
                            "items": {
                                "type": "number"
                            },
                            "minItems": 2,
                            "maxItems": 2,
                        },
                        "tabular_line": {
                            "type": "boolean"
                        },
                    },
                },
            },
        },
        "tabular_lines": {
            "type": "object",
            "patternProperties": {
                "line_id": {
                    "type": "object",
                    "properties": {
                        "texto": {
                            "type": "string"
                        }
                    },
                },
                "header_line": {
                    "type": "boolean"
                },
            },
        },
    },
}